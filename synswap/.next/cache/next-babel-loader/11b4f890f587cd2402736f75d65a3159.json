{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport doLogin from '../utils/Auth/login';\nimport LoginForm from '../components/login/LoginForm';\nimport { useDispatch } from \"react-redux\";\nexport default function Login() {\n  var _useState = useState({\n    username: '',\n    error: '',\n    password: '',\n    token: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      userData = _useState2[0],\n      setUserData = _useState2[1];\n\n  var dispatch = useDispatch();\n\n  function handleSubmit(_x) {\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function _handleSubmit() {\n    _handleSubmit = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var res, payload;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return doLogin(userData);\n\n            case 3:\n              res = _context.sent;\n\n              if (res.status === 'success') {\n                payload = {\n                  username: userData.username,\n                  password: userData.password,\n                  token: res.token\n                };\n                dispatch({\n                  type: 'LOGIN',\n                  payload: payload\n                });\n              } else {//setUserData({ ...userData, error: res });\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  return React.createElement(\"div\", {\n    className: \"login\"\n  }, React.createElement(LoginForm, {\n    onClick: function onClick(e) {\n      return handleSubmit(e);\n    },\n    username: userData.username,\n    changeUsername: function changeUsername(e) {\n      var newUsername = e.target.value;\n      setUserData({\n        username: newUsername,\n        error: userData.error,\n        password: userData.password\n      });\n    },\n    changePassword: function changePassword(e) {\n      var newPassword = e.target.value;\n      setUserData({\n        username: userData.username,\n        error: userData.error,\n        password: newPassword\n      });\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/jjmacakiage/dev/synswap-web-react/synswap/pages/Login.js"],"names":["React","useState","doLogin","LoginForm","useDispatch","Login","username","error","password","token","userData","setUserData","dispatch","handleSubmit","e","preventDefault","res","status","payload","type","newUsername","target","value","newPassword"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,OAAP,MAAqB,qBAArB;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,SAAQC,WAAR,QAA0B,aAA1B;AAEA,eAAe,SAASC,KAAT,GAAkB;AAAA,kBACGJ,QAAQ,CAAC;AAAEK,IAAAA,QAAQ,EAAE,EAAZ;AAAgBC,IAAAA,KAAK,EAAE,EAAvB;AAA4BC,IAAAA,QAAQ,EAAE,EAAtC;AAA0CC,IAAAA,KAAK,EAAE;AAAjD,GAAD,CADX;AAAA;AAAA,MACtBC,QADsB;AAAA,MACZC,WADY;;AAE7B,MAAMC,QAAQ,GAAGR,WAAW,EAA5B;;AAF6B,WAIdS,YAJc;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,6BAI7B,iBAA4BC,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AACIA,cAAAA,CAAC,CAACC,cAAF;AADJ;AAAA,qBAEsBb,OAAO,CAACQ,QAAD,CAF7B;;AAAA;AAEUM,cAAAA,GAFV;;AAGI,kBAAIA,GAAG,CAACC,MAAJ,KAAe,SAAnB,EAA8B;AACpBC,gBAAAA,OADoB,GACV;AAAEZ,kBAAAA,QAAQ,EAAEI,QAAQ,CAACJ,QAArB;AAA+BE,kBAAAA,QAAQ,EAAEE,QAAQ,CAACF,QAAlD;AAA4DC,kBAAAA,KAAK,EAAEO,GAAG,CAACP;AAAvE,iBADU;AAE1BG,gBAAAA,QAAQ,CAAC;AAAEO,kBAAAA,IAAI,EAAE,OAAR;AAAiBD,kBAAAA,OAAO,EAAEA;AAA1B,iBAAD,CAAR;AACH,eAHD,MAIK,CACD;AACH;;AATL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAJ6B;AAAA;AAAA;;AAiB7B,SACI;AAAK,IAAA,SAAS,EAAC;AAAf,KACG,oBAAC,SAAD;AACI,IAAA,OAAO,EAAG,iBAAAJ,CAAC;AAAA,aAAKD,YAAY,CAACC,CAAD,CAAjB;AAAA,KADf;AAEI,IAAA,QAAQ,EAAGJ,QAAQ,CAACJ,QAFxB;AAGI,IAAA,cAAc,EAAG,wBAAAQ,CAAC,EAAI;AAAE,UAAMM,WAAW,GAAGN,CAAC,CAACO,MAAF,CAASC,KAA7B;AAAqCX,MAAAA,WAAW,CAAC;AAAEL,QAAAA,QAAQ,EAAEc,WAAZ;AAAyBb,QAAAA,KAAK,EAAEG,QAAQ,CAACH,KAAzC;AAAgDC,QAAAA,QAAQ,EAAEE,QAAQ,CAACF;AAAnE,OAAD,CAAX;AAA2F,KAH5J;AAII,IAAA,cAAc,EAAG,wBAAAM,CAAC,EAAI;AAAE,UAAMS,WAAW,GAAGT,CAAC,CAACO,MAAF,CAASC,KAA7B;AAAqCX,MAAAA,WAAW,CAAC;AAAEL,QAAAA,QAAQ,EAAEI,QAAQ,CAACJ,QAArB;AAA+BC,QAAAA,KAAK,EAAEG,QAAQ,CAACH,KAA/C;AAAsDC,QAAAA,QAAQ,EAAEe;AAAhE,OAAD,CAAX;AAA2F;AAJ5J,IADH,CADJ;AAUH","sourcesContent":["import React, { useState } from 'react'\nimport doLogin  from '../utils/Auth/login';\nimport LoginForm from '../components/login/LoginForm';\nimport {useDispatch} from \"react-redux\";\n\nexport default function Login () {\n    const [userData, setUserData] = useState({ username: '', error: '' , password: '', token: ''});\n    const dispatch = useDispatch();\n\n    async function handleSubmit(e) {\n        e.preventDefault();\n        const res = await doLogin(userData);\n        if (res.status === 'success') {\n            const payload = { username: userData.username, password: userData.password, token: res.token };\n            dispatch({ type: 'LOGIN', payload: payload });\n        }\n        else {\n            //setUserData({ ...userData, error: res });\n        }\n    }\n\n\n    return (\n        <div className='login'>\n           <LoginForm\n               onClick={ e =>  handleSubmit(e) }\n               username={ userData.username }\n               changeUsername={ e => { const newUsername = e.target.value;  setUserData({ username: newUsername, error: userData.error, password: userData.password}) } }\n               changePassword={ e => { const newPassword = e.target.value;  setUserData({ username: userData.username, error: userData.error, password: newPassword}) } }\n           />\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}